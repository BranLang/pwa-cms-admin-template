<mat-toolbar color="primary" class="toolbar">
  <div class="brand" [routerLink]="['/']">{{ localizedTitle() }}</div>

  <span class="spacer"></span>

  <nav class="nav">
    @for (m of menuItems(); track m.id) {
      @if (!m.children?.length) {
        <a mat-button [routerLink]="[m.path]">{{ m.i18nKey | translate }}</a>
      } @else {
        <button mat-button [matMenuTriggerFor]="parentMenu">{{ m.i18nKey | translate }}</button>
        <mat-menu #parentMenu="matMenu">
          @for (c of m.children; track c.id) {
            @if (!c.children?.length) {
              <button mat-menu-item [routerLink]="[c.path]">{{ c.i18nKey | translate }}</button>
            } @else {
              <button mat-menu-item [matMenuTriggerFor]="childMenu">{{ c.i18nKey | translate }}</button>
              <mat-menu #childMenu="matMenu">
                @for (gc of c.children; track gc.id) {
                  <button mat-menu-item [routerLink]="[gc.path]">{{ gc.i18nKey | translate }}</button>
                }
              </mat-menu>
            }
          }
        </mat-menu>
      }
    }
  </nav>

  <span class="spacer"></span>

  <div class="actions">
    <!-- Theme selector -->
    <button mat-icon-button [matMenuTriggerFor]="themeMenu" class="theme-toggle" [attr.aria-label]="'nav.theme' | translate">
      <mat-icon>palette</mat-icon>
    </button>
    <mat-menu #themeMenu="matMenu" class="theme-menu">
      @for(themeOption of availableThemes; track themeOption.name) {
        <button mat-menu-item (click)="setTheme(themeOption.id)" class="theme-option">
          <mat-icon class="theme-radio" [style.color]="theme() === themeOption.id ? themeOption.primary : ''">
            {{ theme() === themeOption.id ? 'radio_button_checked' : 'radio_button_unchecked' }}
          </mat-icon>
          <svg class="theme-swatch-svg" width="80" height="80" viewBox="0 0 80 80">
            <path [attr.fill]="themeOption.swatch.background" d="M77.87 0C79.05 0 80 .95 80 2.13v75.74c0 1.17-.95 2.13-2.13 2.13H2.13C.96 80 0 79.04 0 77.87V2.13C0 .95.96 0 2.13 0h75.74z"/>
            <path [attr.fill]="themeOption.swatch.primary" d="M0 0h80v17.24H0V0z"/>
          </svg>
          <span class="theme-name">{{ themeOption.name }}</span>
        </button>
      }
    </mat-menu>

    <!-- Language selector -->
    <button mat-icon-button [matMenuTriggerFor]="langMenu" class="lang-toggle" [attr.aria-label]="'nav.language' | translate">
      <mat-icon>language</mat-icon>
    </button>
    <mat-menu #langMenu="matMenu" class="lang-menu">
      <button mat-menu-item (click)="switchLanguage('sk')" class="lang-option">
        <span class="lang-code">SK</span>
        <span class="lang-name">{{ 'lang.sk' | translate }}</span>
      </button>
      <button mat-menu-item (click)="switchLanguage('en')" class="lang-option">
        <span class="lang-code">EN</span>
        <span class="lang-name">{{ 'lang.en' | translate }}</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>

<main class="layout-content">
  <router-outlet />
</main>


